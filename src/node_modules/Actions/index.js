import {
	START,
	SUCCESS,
	FAILURE,
	LOGIN,
	LOGOUT
} from 'constants.js'

export function actionLogin(form){
	const {login, password} = form
	return (dispatch) => {
		dispatch({
			type: LOGIN+START
		})
		fetch('https://mysterious-reef-29460.herokuapp.com/api/v1/validate', {
			method: 'post',
			headers: {
				'Accept': 'application/json, text/plain, */*',
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({email: login, password: password})
		})
		.then(function (response) {
			return response.json();
		})
		.then(function (result) {
			console.log(result);
			dispatch({
	 			type: LOGIN+SUCCESS
	 		})
		})
		.catch (function (error) {
			console.log('Request failed', error);
			dispatch({
	 			type: LOGIN+FAILURE
	 		})
		});
		// setTimeout( () => {
		// 	if( login == 'admin' && password == 12345 ){
		// 		dispatch({
		// 			type: LOGIN+SUCCESS
		// 		})
		// 	}else{
		// 		dispatch({
		// 			type: LOGIN+FAILURE
		// 		})
		// 	}
		// }, 1500)
	}
}

export function actionLogout(){
	return({
		type: LOGOUT
	})
}