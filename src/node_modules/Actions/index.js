import {
	START,
	SUCCESS,
	FAILURE,
	LOGIN,
	LOGOUT,
	PERSONAL_INFO
} from 'constants.js'

export function actionLogin(form){
	const {login, password} = form;

	return (dispatch) => {
		dispatch({
			type: LOGIN+START
		})
		if( login == '1' && password == '1' ){
			return dispatch({
				type: LOGIN+SUCCESS,
				payload: {id: 1}
			})
		}else{
			return dispatch({
				type: LOGIN+FAILURE
			})
		}
		// fetch('https://mysterious-reef-29460.herokuapp.com/api/v1/validate', {
		// 	method: 'post',
		// 	headers: {
		// 		'Accept': 'application/json, text/plain, */*',
		// 		'Content-Type': 'application/json'
		// 	},
		// 	body: JSON.stringify({email: login, password: password})
		// })
		// .then(function (response) {
		// 	return response.json();
		// })
		// .then(function (result) {
		// 	console.log(result.status);
		// 	switch( result.status ){
		// 		case 'ok':
		// 			return dispatch({
		// 				type: LOGIN+SUCCESS
		// 			})
		// 		case 'err':
		// 			return dispatch({
		// 				type: LOGIN+FAILURE
		// 		 	})
		// 	}
		// })
		// .catch (function (error) {
		// 	console.log('Request failed', error);
		// 	return dispatch({
	 // 			type: LOGIN+FAILURE
	 // 		})
		// });
	}
}

export function actionLogout(){
	return({
		type: LOGOUT
	})
}


export function requestPersonalInfo(id){
	return (dispatch) => {
		dispatch({
			type: PERSONAL_INFO+START
		})
		fetch('https://mysterious-reef-29460.herokuapp.com/api/v1/user-info/'+id)
			.then(response => {
				console.log(response)
				return response.json()
			})
			.then( result => {
				switch( result.status ){
					case 'ok':
						return dispatch({
							type: PERSONAL_INFO+SUCCESS,
							payload: result.data
						})
					default:
						return dispatch({
							type: PERSONAL_INFO+FAILURE
						})
				}
			})
			.catch(err => {
				return dispatch({
					type: PERSONAL_INFO+FAILURE
				})
			})
	}
}